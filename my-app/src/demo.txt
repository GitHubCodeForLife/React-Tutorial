import logo from "./logo.svg";
import "./App.css";
import React, { useState, useEffect } from "react";
import Solution from "./Solutions";
//useEffect
//useState

function App() {
  return <Questions />;
}

function Questions() {
  const [questions, setQuetions] = useState([
    {
      id: 0,
      answer: {
        A: "A1",
        B: "B1",
      },
    },
    {
      id: 1,
      answer: {
        A: "A2",
        B: "B2",
      },
    },
    {
      id: 2,
      answer: {
        A: "A3",
        B: "B3",
      },
    },
  ]);
  return (
    <div>
      <form>
        <h1>Hello</h1>
        {questions.map((question) => (
          <SingleQuestion
            key={question.id}
            question={question}
            handleChange={(value) => {
              // console.log("value" + value);
              handleChange(question.id, value, questions, setQuetions);
              console.log({ questions });
            }}
          />
        ))}
        <button
          onClick={() => submitAnswer(questions, setQuetions)}
          type="button"
        >
          Submit
        </button>
        <button
          type="reset"
          onClick={() => clearAnswer(questions, setQuetions)}
        >
          Reset
        </button>
      </form>
    </div>
  );
}

function clearAnswer(questions, setQuetions) {
  const newQuestions = [...questions];
  newQuestions.forEach((question) => {
    question.value = undefined;
    question.error = true;
  });
  setQuetions(newQuestions);
}

function submitAnswer(questions, setQuetions) {
  const newQuestions = [...questions];
  newQuestions.forEach((question) => {
    if (question.value === undefined) {
      question.error = true;
    } else {
      question.error = false;
    }
  });
  setQuetions(newQuestions);
  console.log("submitAnswer");
  console.log(questions);
}

function handleChange(id, value, questions, setQuetions) {
  const newQuestions = [...questions];
  newQuestions[id].value = value;
  newQuestions[id].error = false;
  setQuetions(newQuestions);
}

function SingleQuestion({ question, handleChange }) {
  // console.log({ question });
  return (
    <div
      onChange={(e) => {
        console.log(e.target.value);
        handleChange(e.target.value);
      }}
    >
      <h1>{question.id}</h1>
      {question.error && <p>Please select an option</p>}
      <input
        type="radio"
        value={question.answer.A}
        name={question.id}
        // onChange={(e) => {
        //   console.log(e.target.value);
        //   handleChange(e.target.value);
        // }}
      />
      <label>{question.answer.A}</label>
      <input
        type="radio"
        value={question.answer.B}
        name={question.id}
        // onChange={(e) => {
        //   console.log(e.target.value);
        //   handleChange(e.target.value);
        // }}
      />
      <label>{question.answer.B}</label>
    </div>
  );
}

export default App;
